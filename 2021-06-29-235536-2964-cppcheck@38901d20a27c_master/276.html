
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - clib (cppcheck 2.3-1)</title>
    <link rel="stylesheet" href="style.css">
    <style>
pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script>
      function getStyle(el, styleProp) {
        var y;

        if (el.currentStyle) {
          y = el.currentStyle[styleProp];
        } else if (window.getComputedStyle) {
          y = document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
        }

        return y;
      }

      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;

        if (el.style.display === "block") {
          el.style.display = "none";
          mark.textContent = "[+]";
        } else {
          el.style.display = "block";
          mark.textContent = "[-]";
        }
      }

      function initExpandables() {
        var elements = document.querySelectorAll(".expandable");

        for (var i = 0, len = elements.length; i < len; i++) {
          var el = elements[i];
          var clickable = el.querySelector("span");
          var marker = clickable.querySelector(".marker");
          var content = el.querySelector(".content");
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.addEventListener("click", toggle);
        }
      }

      function toggleDisplay(id) {
        var elements = document.querySelectorAll("." + id);

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("d-none");
        }
      }

      function toggleAll() {
        var elements = document.querySelectorAll("input");

        // starting from 1 since 0 is the "toggle all" input
        for (var i = 1, len = elements.length; i < len; i++) {
          var el = elements[i];

          if (el.checked) {
            el.checked = false;
          } else {
            el.checked = true;
          }

          toggleDisplay(el.id);
        }
      }
      window.addEventListener("load", initExpandables);
    </script>
  </head>
  <body>
    <div id="header" class="header">
      <h1>Cppcheck report - clib (cppcheck 2.3-1): glib/gnulib/isnan.c</h1>
    </div>
    <div class="wrapper">
      <div id="menu">
       <p id="filename"><a href="index.html">Defects:</a> isnan.c</p>
<a href="276.html#line-80"> unusedStructMember 80</a><a href="276.html#line-80"> unusedStructMember 80</a><a href="276.html#line-180"> duplicateValueTernary 180</a><a href="276.html#line-180"> duplicateValueTernary 180</a><a href="276.html#line-180"> duplicateValueTernary 180</a><a href="276.html#line-180"> duplicateValueTernary 180</a>
    </div>
    <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189</pre></div></td><td class="code"><div class="highlight"><pre><span></span><a name="line-1"></a><span class="cm">/* Test for NaN that does not need libm.</span>
<a name="line-2"></a><span class="cm">   Copyright (C) 2007-2019 Free Software Foundation, Inc.</span>
<a name="line-3"></a>
<a name="line-4"></a><span class="cm">   This program is free software: you can redistribute it and/or modify</span>
<a name="line-5"></a><span class="cm">   it under the terms of the GNU Lesser General Public License as published by</span>
<a name="line-6"></a><span class="cm">   the Free Software Foundation; either version 2.1 of the License, or</span>
<a name="line-7"></a><span class="cm">   (at your option) any later version.</span>
<a name="line-8"></a>
<a name="line-9"></a><span class="cm">   This program is distributed in the hope that it will be useful,</span>
<a name="line-10"></a><span class="cm">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="line-11"></a><span class="cm">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="line-12"></a><span class="cm">   GNU Lesser General Public License for more details.</span>
<a name="line-13"></a>
<a name="line-14"></a><span class="cm">   You should have received a copy of the GNU Lesser General Public License</span>
<a name="line-15"></a><span class="cm">   along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.  */</span>
<a name="line-16"></a>
<a name="line-17"></a><span class="cm">/* Written by Bruno Haible &lt;bruno@clisp.org&gt;, 2007.  */</span>
<a name="line-18"></a>
<a name="line-19"></a><span class="cp">#include</span> <span class="cpf">&lt;config.h&gt;</span><span class="cp"></span>
<a name="line-20"></a>
<a name="line-21"></a><span class="cm">/* Specification.  */</span>
<a name="line-22"></a><span class="cp">#ifdef USE_LONG_DOUBLE</span>
<a name="line-23"></a><span class="cm">/* Specification found in math.h or isnanl-nolibm.h.  */</span>
<a name="line-24"></a><span class="k">extern</span> <span class="kt">int</span> <span class="n">rpl_isnanl</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">double</span> <span class="n">x</span><span class="p">)</span> <span class="n">_GL_ATTRIBUTE_CONST</span><span class="p">;</span>
<a name="line-25"></a><span class="cp">#elif ! defined USE_FLOAT</span>
<a name="line-26"></a><span class="cm">/* Specification found in math.h or isnand-nolibm.h.  */</span>
<a name="line-27"></a><span class="k">extern</span> <span class="kt">int</span> <span class="n">rpl_isnand</span> <span class="p">(</span><span class="kt">double</span> <span class="n">x</span><span class="p">);</span>
<a name="line-28"></a><span class="cp">#else </span><span class="cm">/* defined USE_FLOAT */</span><span class="cp"></span>
<a name="line-29"></a><span class="cm">/* Specification found in math.h or isnanf-nolibm.h.  */</span>
<a name="line-30"></a><span class="k">extern</span> <span class="kt">int</span> <span class="n">rpl_isnanf</span> <span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">);</span>
<a name="line-31"></a><span class="cp">#endif</span>
<a name="line-32"></a>
<a name="line-33"></a><span class="cp">#include</span> <span class="cpf">&lt;float.h&gt;</span><span class="cp"></span>
<a name="line-34"></a><span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<a name="line-35"></a>
<a name="line-36"></a><span class="cp">#include</span> <span class="cpf">&quot;float+.h&quot;</span><span class="cp"></span>
<a name="line-37"></a>
<a name="line-38"></a><span class="cp">#ifdef USE_LONG_DOUBLE</span>
<a name="line-39"></a><span class="cp"># define FUNC rpl_isnanl</span>
<a name="line-40"></a><span class="cp"># define DOUBLE long double</span>
<a name="line-41"></a><span class="cp"># define MAX_EXP LDBL_MAX_EXP</span>
<a name="line-42"></a><span class="cp"># define MIN_EXP LDBL_MIN_EXP</span>
<a name="line-43"></a><span class="cp"># if defined LDBL_EXPBIT0_WORD &amp;&amp; defined LDBL_EXPBIT0_BIT</span>
<a name="line-44"></a><span class="cp">#  define KNOWN_EXPBIT0_LOCATION</span>
<a name="line-45"></a><span class="cp">#  define EXPBIT0_WORD LDBL_EXPBIT0_WORD</span>
<a name="line-46"></a><span class="cp">#  define EXPBIT0_BIT LDBL_EXPBIT0_BIT</span>
<a name="line-47"></a><span class="cp"># endif</span>
<a name="line-48"></a><span class="cp"># define SIZE SIZEOF_LDBL</span>
<a name="line-49"></a><span class="cp"># define L_(literal) literal##L</span>
<a name="line-50"></a><span class="cp">#elif ! defined USE_FLOAT</span>
<a name="line-51"></a><span class="cp"># define FUNC rpl_isnand</span>
<a name="line-52"></a><span class="cp"># define DOUBLE double</span>
<a name="line-53"></a><span class="cp"># define MAX_EXP DBL_MAX_EXP</span>
<a name="line-54"></a><span class="cp"># define MIN_EXP DBL_MIN_EXP</span>
<a name="line-55"></a><span class="cp"># if defined DBL_EXPBIT0_WORD &amp;&amp; defined DBL_EXPBIT0_BIT</span>
<a name="line-56"></a><span class="cp">#  define KNOWN_EXPBIT0_LOCATION</span>
<a name="line-57"></a><span class="cp">#  define EXPBIT0_WORD DBL_EXPBIT0_WORD</span>
<a name="line-58"></a><span class="cp">#  define EXPBIT0_BIT DBL_EXPBIT0_BIT</span>
<a name="line-59"></a><span class="cp"># endif</span>
<a name="line-60"></a><span class="cp"># define SIZE SIZEOF_DBL</span>
<a name="line-61"></a><span class="cp"># define L_(literal) literal</span>
<a name="line-62"></a><span class="cp">#else </span><span class="cm">/* defined USE_FLOAT */</span><span class="cp"></span>
<a name="line-63"></a><span class="cp"># define FUNC rpl_isnanf</span>
<a name="line-64"></a><span class="cp"># define DOUBLE float</span>
<a name="line-65"></a><span class="cp"># define MAX_EXP FLT_MAX_EXP</span>
<a name="line-66"></a><span class="cp"># define MIN_EXP FLT_MIN_EXP</span>
<a name="line-67"></a><span class="cp"># if defined FLT_EXPBIT0_WORD &amp;&amp; defined FLT_EXPBIT0_BIT</span>
<a name="line-68"></a><span class="cp">#  define KNOWN_EXPBIT0_LOCATION</span>
<a name="line-69"></a><span class="cp">#  define EXPBIT0_WORD FLT_EXPBIT0_WORD</span>
<a name="line-70"></a><span class="cp">#  define EXPBIT0_BIT FLT_EXPBIT0_BIT</span>
<a name="line-71"></a><span class="cp"># endif</span>
<a name="line-72"></a><span class="cp"># define SIZE SIZEOF_FLT</span>
<a name="line-73"></a><span class="cp"># define L_(literal) literal##f</span>
<a name="line-74"></a><span class="cp">#endif</span>
<a name="line-75"></a>
<a name="line-76"></a><span class="cp">#define EXP_MASK ((MAX_EXP - MIN_EXP) | 7)</span>
<a name="line-77"></a>
<a name="line-78"></a><span class="cp">#define NWORDS \</span>
<a name="line-79"></a><span class="cp">  ((sizeof (DOUBLE) + sizeof (unsigned int) - 1) / sizeof (unsigned int))</span>
<a name="line-80"></a><span class="hll"><span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span> <span class="n">DOUBLE</span> <span class="n">value</span><span class="p">;</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">word</span><span class="p">[</span><span class="n">NWORDS</span><span class="p">];</span> <span class="p">}</span> <span class="n">memory_double</span><span class="p">;</span><span class="error2">&lt;--- union member 'memory_double::value' is never used.</span><span class="error2">&lt;--- union member 'memory_double::word' is never used.</span>
</span><a name="line-81"></a>
<a name="line-82"></a><span class="cm">/* Most hosts nowadays use IEEE floating point, so they use IEC 60559</span>
<a name="line-83"></a><span class="cm">   representations, have infinities and NaNs, and do not trap on</span>
<a name="line-84"></a><span class="cm">   exceptions.  Define IEEE_FLOATING_POINT if this host is one of the</span>
<a name="line-85"></a><span class="cm">   typical ones.  The C11 macro __STDC_IEC_559__ is close to what is</span>
<a name="line-86"></a><span class="cm">   wanted here, but is not quite right because this file does not require</span>
<a name="line-87"></a><span class="cm">   all the features of C11 Annex F (and does not require C11 at all,</span>
<a name="line-88"></a><span class="cm">   for that matter).  */</span>
<a name="line-89"></a>
<a name="line-90"></a><span class="cp">#define IEEE_FLOATING_POINT (FLT_RADIX == 2 &amp;&amp; FLT_MANT_DIG == 24 \</span>
<a name="line-91"></a><span class="cp">                             &amp;&amp; FLT_MIN_EXP == -125 &amp;&amp; FLT_MAX_EXP == 128)</span>
<a name="line-92"></a>
<a name="line-93"></a><span class="kt">int</span>
<a name="line-94"></a><span class="nf">FUNC</span> <span class="p">(</span><span class="n">DOUBLE</span> <span class="n">x</span><span class="p">)</span>
<a name="line-95"></a><span class="p">{</span>
<a name="line-96"></a><span class="cp">#if defined KNOWN_EXPBIT0_LOCATION &amp;&amp; IEEE_FLOATING_POINT</span>
<a name="line-97"></a><span class="cp"># if defined USE_LONG_DOUBLE &amp;&amp; ((defined __ia64 &amp;&amp; LDBL_MANT_DIG == 64) || (defined __x86_64__ || defined __amd64__) || (defined __i386 || defined __i386__ || defined _I386 || defined _M_IX86 || defined _X86_)) &amp;&amp; !HAVE_SAME_LONG_DOUBLE_AS_DOUBLE</span>
<a name="line-98"></a>  <span class="cm">/* Special CPU dependent code is needed to treat bit patterns outside the</span>
<a name="line-99"></a><span class="cm">     IEEE 754 specification (such as Pseudo-NaNs, Pseudo-Infinities,</span>
<a name="line-100"></a><span class="cm">     Pseudo-Zeroes, Unnormalized Numbers, and Pseudo-Denormals) as NaNs.</span>
<a name="line-101"></a><span class="cm">     These bit patterns are:</span>
<a name="line-102"></a><span class="cm">       - exponent = 0x0001..0x7FFF, mantissa bit 63 = 0,</span>
<a name="line-103"></a><span class="cm">       - exponent = 0x0000, mantissa bit 63 = 1.</span>
<a name="line-104"></a><span class="cm">     The NaN bit pattern is:</span>
<a name="line-105"></a><span class="cm">       - exponent = 0x7FFF, mantissa &gt;= 0x8000000000000001.  */</span>
<a name="line-106"></a>  <span class="n">memory_double</span> <span class="n">m</span><span class="p">;</span>
<a name="line-107"></a>  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">exponent</span><span class="p">;</span>
<a name="line-108"></a>
<a name="line-109"></a>  <span class="n">m</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<a name="line-110"></a>  <span class="n">exponent</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="n">EXPBIT0_WORD</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">EXPBIT0_BIT</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">EXP_MASK</span><span class="p">;</span>
<a name="line-111"></a><span class="cp">#  ifdef WORDS_BIGENDIAN</span>
<a name="line-112"></a>  <span class="cm">/* Big endian: EXPBIT0_WORD = 0, EXPBIT0_BIT = 16.  */</span>
<a name="line-113"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">exponent</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-114"></a>    <span class="k">return</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">15</span><span class="p">);</span>
<a name="line-115"></a>  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">exponent</span> <span class="o">==</span> <span class="n">EXP_MASK</span><span class="p">)</span>
<a name="line-116"></a>    <span class="k">return</span> <span class="p">(((</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">^</span> <span class="mh">0x8000U</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-117"></a>  <span class="k">else</span>
<a name="line-118"></a>    <span class="k">return</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">15</span><span class="p">);</span>
<a name="line-119"></a><span class="cp">#  else</span>
<a name="line-120"></a>  <span class="cm">/* Little endian: EXPBIT0_WORD = 2, EXPBIT0_BIT = 0.  */</span>
<a name="line-121"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">exponent</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-122"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">31</span><span class="p">);</span>
<a name="line-123"></a>  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">exponent</span> <span class="o">==</span> <span class="n">EXP_MASK</span><span class="p">)</span>
<a name="line-124"></a>    <span class="k">return</span> <span class="p">((</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">^</span> <span class="mh">0x80000000U</span><span class="p">)</span> <span class="o">|</span> <span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-125"></a>  <span class="k">else</span>
<a name="line-126"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">31</span><span class="p">)</span> <span class="o">^</span> <span class="mi">1</span><span class="p">;</span>
<a name="line-127"></a><span class="cp">#  endif</span>
<a name="line-128"></a><span class="cp"># else</span>
<a name="line-129"></a>  <span class="cm">/* Be careful to not do any floating-point operation on x, such as x == x,</span>
<a name="line-130"></a><span class="cm">     because x may be a signaling NaN.  */</span>
<a name="line-131"></a><span class="cp">#  if defined __SUNPRO_C || defined __ICC || defined _MSC_VER \</span>
<a name="line-132"></a><span class="cp">      || defined __DECC || defined __TINYC__ \</span>
<a name="line-133"></a><span class="cp">      || (defined __sgi &amp;&amp; !defined __GNUC__)</span>
<a name="line-134"></a>  <span class="cm">/* The Sun C 5.0, Intel ICC 10.0, Microsoft Visual C/C++ 9.0, Compaq (ex-DEC)</span>
<a name="line-135"></a><span class="cm">     6.4, and TinyCC compilers don&#39;t recognize the initializers as constant</span>
<a name="line-136"></a><span class="cm">     expressions.  The Compaq compiler also fails when constant-folding</span>
<a name="line-137"></a><span class="cm">     0.0 / 0.0 even when constant-folding is not required.  The Microsoft</span>
<a name="line-138"></a><span class="cm">     Visual C/C++ compiler also fails when constant-folding 1.0 / 0.0 even</span>
<a name="line-139"></a><span class="cm">     when constant-folding is not required. The SGI MIPSpro C compiler</span>
<a name="line-140"></a><span class="cm">     complains about &quot;floating-point operation result is out of range&quot;.  */</span>
<a name="line-141"></a>  <span class="k">static</span> <span class="n">DOUBLE</span> <span class="n">zero</span> <span class="o">=</span> <span class="n">L_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<a name="line-142"></a>  <span class="n">memory_double</span> <span class="n">nan</span><span class="p">;</span>
<a name="line-143"></a>  <span class="n">DOUBLE</span> <span class="n">plus_inf</span> <span class="o">=</span> <span class="n">L_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">zero</span><span class="p">;</span>
<a name="line-144"></a>  <span class="n">DOUBLE</span> <span class="n">minus_inf</span> <span class="o">=</span> <span class="o">-</span><span class="n">L_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">zero</span><span class="p">;</span>
<a name="line-145"></a>  <span class="n">nan</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">zero</span> <span class="o">/</span> <span class="n">zero</span><span class="p">;</span>
<a name="line-146"></a><span class="cp">#  else</span>
<a name="line-147"></a>  <span class="k">static</span> <span class="n">memory_double</span> <span class="n">nan</span> <span class="o">=</span> <span class="p">{</span> <span class="n">L_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">L_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span> <span class="p">};</span>
<a name="line-148"></a>  <span class="k">static</span> <span class="n">DOUBLE</span> <span class="n">plus_inf</span> <span class="o">=</span> <span class="n">L_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">L_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<a name="line-149"></a>  <span class="k">static</span> <span class="n">DOUBLE</span> <span class="n">minus_inf</span> <span class="o">=</span> <span class="o">-</span><span class="n">L_</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="o">/</span> <span class="n">L_</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
<a name="line-150"></a><span class="cp">#  endif</span>
<a name="line-151"></a>  <span class="p">{</span>
<a name="line-152"></a>    <span class="n">memory_double</span> <span class="n">m</span><span class="p">;</span>
<a name="line-153"></a>
<a name="line-154"></a>    <span class="cm">/* A NaN can be recognized through its exponent.  But exclude +Infinity and</span>
<a name="line-155"></a><span class="cm">       -Infinity, which have the same exponent.  */</span>
<a name="line-156"></a>    <span class="n">m</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<a name="line-157"></a>    <span class="k">if</span> <span class="p">(((</span><span class="n">m</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="n">EXPBIT0_WORD</span><span class="p">]</span> <span class="o">^</span> <span class="n">nan</span><span class="p">.</span><span class="n">word</span><span class="p">[</span><span class="n">EXPBIT0_WORD</span><span class="p">])</span>
<a name="line-158"></a>         <span class="o">&amp;</span> <span class="p">(</span><span class="n">EXP_MASK</span> <span class="o">&lt;&lt;</span> <span class="n">EXPBIT0_BIT</span><span class="p">))</span>
<a name="line-159"></a>        <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-160"></a>      <span class="k">return</span> <span class="p">(</span><span class="n">memcmp</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">m</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">plus_inf</span><span class="p">,</span> <span class="n">SIZE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span>
<a name="line-161"></a>              <span class="o">&amp;&amp;</span> <span class="n">memcmp</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">m</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">minus_inf</span><span class="p">,</span> <span class="n">SIZE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">);</span>
<a name="line-162"></a>    <span class="k">else</span>
<a name="line-163"></a>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-164"></a>  <span class="p">}</span>
<a name="line-165"></a><span class="cp"># endif</span>
<a name="line-166"></a><span class="cp">#else</span>
<a name="line-167"></a>  <span class="cm">/* The configuration did not find sufficient information, or does</span>
<a name="line-168"></a><span class="cm">     not use IEEE floating point.  Give up about the signaling NaNs;</span>
<a name="line-169"></a><span class="cm">     handle only the quiet NaNs.  */</span>
<a name="line-170"></a>  <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span>
<a name="line-171"></a>    <span class="p">{</span>
<a name="line-172"></a><span class="cp"># if defined USE_LONG_DOUBLE &amp;&amp; ((defined __ia64 &amp;&amp; LDBL_MANT_DIG == 64) || (defined __x86_64__ || defined __amd64__) || (defined __i386 || defined __i386__ || defined _I386 || defined _M_IX86 || defined _X86_)) &amp;&amp; !HAVE_SAME_LONG_DOUBLE_AS_DOUBLE</span>
<a name="line-173"></a>      <span class="cm">/* Detect any special bit patterns that pass ==; see comment above.  */</span>
<a name="line-174"></a>      <span class="n">memory_double</span> <span class="n">m1</span><span class="p">;</span>
<a name="line-175"></a>      <span class="n">memory_double</span> <span class="n">m2</span><span class="p">;</span>
<a name="line-176"></a>
<a name="line-177"></a>      <span class="n">memset</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">m1</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SIZE</span><span class="p">);</span>
<a name="line-178"></a>      <span class="n">memset</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">m2</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">SIZE</span><span class="p">);</span>
<a name="line-179"></a>      <span class="n">m1</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
<a name="line-180"></a><span class="hll">      <span class="n">m2</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">?</span> <span class="mf">0.0L</span> <span class="o">:</span> <span class="mf">-0.0L</span><span class="p">);</span><div class="verbose expandable"><span class="error2">&lt;--- Same value in both branches of ternary operator. <span class="marker">[+]</span></span><div class="content">Finding the same value in both branches of ternary operator is suspicious as the same code is executed regardless of the condition.</div></div><div class="verbose expandable"><span class="error2">&lt;--- Same value in both branches of ternary operator. <span class="marker">[+]</span></span><div class="content">Finding the same value in both branches of ternary operator is suspicious as the same code is executed regardless of the condition.</div></div><div class="verbose expandable"><span class="error2">&lt;--- Same value in both branches of ternary operator. <span class="marker">[+]</span></span><div class="content">Finding the same value in both branches of ternary operator is suspicious as the same code is executed regardless of the condition.</div></div><div class="verbose expandable"><span class="error2">&lt;--- Same value in both branches of ternary operator. <span class="marker">[+]</span></span><div class="content">Finding the same value in both branches of ternary operator is suspicious as the same code is executed regardless of the condition.</div></div>
</span><a name="line-181"></a>      <span class="k">if</span> <span class="p">(</span><span class="n">memcmp</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">m1</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m2</span><span class="p">.</span><span class="n">value</span><span class="p">,</span> <span class="n">SIZE</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<a name="line-182"></a>        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<a name="line-183"></a><span class="cp"># endif</span>
<a name="line-184"></a>      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<a name="line-185"></a>    <span class="p">}</span>
<a name="line-186"></a>  <span class="k">else</span>
<a name="line-187"></a>    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<a name="line-188"></a><span class="cp">#endif</span>
<a name="line-189"></a><span class="p">}</span>
</pre></div>
</td></tr></table>
      </div> <!-- /.wrapper -->
    </div>
    <div id="footer" class="footer">
      <p>
        Cppcheck 2.3 - a tool for static C/C++ code analysis<br>
        <br>
        Internet: <a href="http://cppcheck.net">http://cppcheck.net</a><br>
        IRC: <a href="irc://irc.freenode.net/cppcheck">irc://irc.freenode.net/cppcheck</a><br>
      </p>
    </div>
  </body>
</html>
